function grayscaleImageIE(a){a.style.filter="progid:DXImageTransform.Microsoft.BasicImage(grayScale=1)"}function grayscaleImage(a){var t=document.createElement("canvas"),e=t.getContext("2d"),r=a.width,c=a.height;t.width=r,t.height=c,e.drawImage(a,0,0);for(var i=e.getImageData(0,0,r,c),d=0;d<i.height;d++)for(var g=0;g<i.width;g++){var o=4*d*i.width+4*g,n=(i.data[o]+i.data[o+1]+i.data[o+2])/3;i.data[o]=n,i.data[o+1]=n,i.data[o+2]=n}return e.putImageData(i,0,0,0,0,i.width,i.height),t.toDataURL()}$("#colored-picture-input").change(function(a){document.getElementById("bw-picture").src=URL.createObjectURL(a.target.files[0]),bwPictureLoad=!1});var bwPictureLoad=!1;$("#bw-picture").load(function(){if(bwPictureLoad===!1){bwPictureLoad=!0;var a=document.getElementById("bw-picture");"Microsoft Internet Explorer"==navigator.appName?grayscaleImageIE(a):a.src=grayscaleImage(a),$("#bw-picture").css({"max-width":"100%","max-height":"100%"})}});